---
title: 网络基础
weight: 1
---
# 网络基础
## 1.iso/osi七层模型
7 应用层   <----------应用层协议--------->   应用层  APDU(应用协议数据单元)  
6 表示层   <----------表示层协议--------->   表示层  PPDU(表示协议数据单元)    
5 会话层   <----------会话层协议--------->   会话层  SPDU(会话协议数据单元)    
4 传输层   <----------传输层协议--------->   传输层  TPDU(传输协议数据单元)  
3 网络层   <----------网络层协议--------->   网络层  报文    
2 数据链路层   <----------数据链路层协议--------->   数据链路层  帧    
1 物理层   <----------物理层协议--------->   物理层 比特     

MAC地址负责局域网通信  
IP地址负责外网通信  

### 物理层:
设备之间的比特流的传输、物理接口、电气特征等  
### 数据链路层:
成帧、用MAC地址访问媒介、错误检测与修正  
### 网络层:
提供逻辑地址、选路
### 传输层:
可靠与不可靠的传输、传输前的错误检测、流控
### 会话层:
对应用会话的管理、同步  
### 表示层:
数据的表示形式、特定功能的实现如-加密
### 应用层:
用户接口

## 2.Tcp/Ip四层模型
* 应用层    --->  (应用层, 表示层, 会话层)
* 传输层    --->  (传输层)
* 网际互联层  ----> (网络层)
* 网络接口层  ----> (物理层, 数据链路层)

### 网络接口层: 
网络接入层是OSI参数模型中的**物理层**和**数据链路层**相对应.它负责监视数据在主机和网络之间的交换。事实上，TCP/IP本身并未定义该层的协议,而
由参与互连的各网络使用自己的物理层和数据链路层协议, 然后与TCP/IP的网络接入层进行连接. ** 地址解析协议(ARP)工作在此层，即OSI参考模型的数据链路层。
### 网际互联层:
网际互联层对应于OSI参考模型的网络层,主要解决主机到主机的通信问题. 它所包含的协议设计数据包在整个网络上的逻辑传输
。改层有三个主要协议:  **网际协议(IP)**、**互联网组管理协议(IGMP)** 和**互联网控制报文协议(ICMP)**
### 传输层:
传输层对应于OSI参考模型的传输层, 为应用层实体提供端到端的通信功能, 保证了数据包的顺序传送及数据的完整性, 该层定义了两个主要的协议: **传输控制协议(TCP)** 
和**用户数据报协议(UDP)**.
### 应用层:
应用层对应于OSI参考模型的高层, 为用户提供所需要的各种服务, 例如:FTP、Telnet, DNS, SMTP等.

### 数据封装过程
||||||||
|---|---|---|---|---|---|---|
|应用数据||||||字节流(数据)|
|应用层|||||FTP头|字节流(数据)|
|传输层||||TCP头|FTP头|字节流(数据)|
|网络层|||IP头|TCP头|FTP头|字节流(数据)|
|数据链路层||以太帧头|IP头|TCP头|FTP头|字节流(数据)|

### TCP/IP模型与OSI模型的比较
* 共同点  
1、OSI参考模型和TCP/IP参考模型都采用了层次结构的概念    
2、都能够提供面向连接和无连接两种通信服务机制    
* 不同点  
1、前者是七层模型, 后者是四层结构    
2、对可靠性要求不同(后者更高)  
3、OSI模型是在协调开发前设计的,具有通用性.TCP/IP是先有协议集然后建立模型, 不适用于非TCP/IP网络  
4、实际市场应用不同(OSI模型只是理论上的模型), 并没有成熟的产品，而TCP/IP已经成为"实际上的国际标准"

## 3.IP地址
### IP报文
|0||15|16|31|
|---|---|---|---|---|
|版本(4))|头部长度(4)|优先级和服务类型(8)|总长度(16)||
| 标识(16)|||标志(3)|偏移量(13)|
|生存时间(8)||协议(8)|头部校验和(16)|
|||源IP地址(32)|
|||目的IP地址(32)|
|||选项(如果有)|
|||数据|

注: 字段后面括号中的数字是指该字段在ip数据包头部信息中所占的位数  

### IP地址分类
|网络类别|最大网络数|IP地址范围|最大主机数|私有IP地址范围|
|---|---|---|---|---|
|A|2^7-2|1.0.0.0 - 126.255.255.255|2^24-2|10.0.0.0 - 10.255.255.255|
|B|2^14|128.0.0.0 - 191.255.255.255|2^16-2|127.16.0.0 - 172.31.255.255|
|C|2^21|192.0.0.0 - 223.255.255.255|2^8-2|192.168.0.0 - 192.168.255.255|

## 4.子网掩码
255.255.255.0  C类标准网段  
26 另外一种子网掩码的表示

## 5.端口作用
### TCP协议包头
|0||15|16|31|
|---|---|---|---|---|
|源端口(16))|||目的端口(16)||
|||序列号(32)|
|||确认号(32)|
| 数据偏移(4)|保留(6)|标识(13)|||
|校验和(16))|||紧急指针(16)||
|||选项|
|||数据|

注: 字段后面括号中的数字是指该字段在TCP头部信息中所占的位数

### UDP协议包头
|0|15|16|31|
|---|---|---|---|
|源端口(16)||目的端口(16)||
|长度(16)||校验和(16)||
|||数据||

注: 字段后面括号中的数字是指该字段在UDP头部信息中所占的位数

端口范围: 0-65535
1万以内的端口系统用，以外自己用

### 查看本机启用的端口
netstat -an
选项:  
    -a: 查看所有连接和监听端口  
    -n: 显示IP地址和端口号，而不显示域名和服务名
    
## 6.DNS作用
DNS: 域名系统
* 在互联网中, 通过IP地址来进行通信  
* IP地址用数字表示, 挤一起来台困难了
* 人对域名跟家敏感  

DNS服务的作用: 将域名解析为IP地址  

### 域名空间结构
1. "." 根域  根域名的服务器只有13台
2. 顶级域: (组织域, 国家或地区域) 
3. 二级域  
4. 主机名 
    
## 7.网关作用
### 网关作用
1. 网关(Gateway)又称网间连接器、协议转换器  
2. 网关在网络层以上实现网络互连,是最复杂的网络互连设备, 仅用于两个高层协议不同的网络互连
3. 网关既可以用于广域网互连, 也可以用于局域网互连。  
4. 网关是一种充当转换重任的服务器或路由器  
